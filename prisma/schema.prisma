generator client {
  provider = "prisma-client"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id                    Int       @id @default(autoincrement())
  email                 String    @unique
  name                  String?
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  address               String?
  avatar                String?
  gender                Gender?
  password              String?
  phone                 String?
  role                  Role      @default(USER)
  provider              Provider  @default(EMAIL_PASSWORD)
  googleId              String?   @unique
  githubId              String?   @unique
  deletedAt             DateTime?
  refreshToken          String?
  refreshTokenExpiresAt DateTime?
  clientRefreshToken          String?
  clientRefreshTokenExpiresAt DateTime?
  departments           Department[] @relation("UserDepartments")
}

model Department {
  id          Int       @id @default(autoincrement())
  name        String    @unique
  description String?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  deletedAt   DateTime?
  users       User[]    @relation("UserDepartments")
  userIds     Int[]     @default([])
}

enum Gender {
  MALE   @map("1")
  FEMALE @map("2")
}

enum Role {
  SYSTEM_ADMIN
  DEPT_ADMIN
  USER
}

enum Provider {
  EMAIL_PASSWORD
  GOOGLE
  GITHUB
}
